<%@page import="org.libertas.*"%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%
    // Criação do DAO e do objeto Jogo
    JogoDao dao = new JogoDao();
    Jogo j = new Jogo();

    // Coleta os parâmetros do formulário
    j.setId(Integer.parseInt(request.getParameter("id")));
    j.setNome(request.getParameter("nome"));
    j.setPlataforma(request.getParameter("plataforma"));
    j.setGenero(request.getParameter("genero"));
    j.setAnoLancamento(Integer.parseInt(request.getParameter("ano_lancamento")));

    // Salva o jogo: atualiza se já existe, adiciona se não
    if (j.getId() > 0) {
        dao.atualizarJogo(j);
    } else {
        dao.adicionarJogo(j);
    }

    // Redireciona para a página de sucesso
    response.sendRedirect("gravar.jsp");
%>
